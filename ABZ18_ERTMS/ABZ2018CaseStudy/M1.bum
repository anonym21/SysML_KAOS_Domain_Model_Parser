<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd;org.eventb.codegen.ui.cgConfig" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1548864109089" org.eventb.texttools.text_representation="machine M1 refines M0  sees C0&#10;&#10;variables connectedTrain front rear MA MAtemp&#10;&#10;invariants&#10;  @inv1_1 MA ∈ dom(connectedTrain) ⇸ ℙ(WAY)&#10;  @inv1_2 ∀tr·(tr∈dom(MA)⇒(∃p,q·(p‥q⊆WAY ∧ p≤q∧MA(tr)=p‥q )))&#10;  @inv1_3 ∀tr·(tr∈dom(MA)⇒front(tr)∈MA(tr))&#10;  @inv1_4 ∀tr·(tr∈dom(rear)∩dom(MA)⇒rear(tr)∈MA(tr))&#10;  @inv1_5 ∀tr1,tr2·(({tr1,tr2}⊆dom(MA)∧tr1≠tr2)⇒MA(tr1)∩MA(tr2)=∅)&#10;  @inv1_6 MAtemp ∈ dom(connectedTrain) ⇸ ℙ(WAY)&#10;  @inv1_7 ∀tr·(tr∈dom(MAtemp)⇒(∃p,q·(p‥q⊆WAY ∧ p≤q∧MAtemp(tr)=p‥q )))&#10;&#10;  //SYSML/KAOS PROOF OBLIGATIONS&#10;  theorem @sysml_kaos_po_G1-Guard=&gt;G-Guard ∀tr,p,q,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))&#10;&#10;&#10;/*remplacement de toute reference a MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})*/&#10;theorem @sysml_kaos_po_G1-Post=&gt;G2-Guard ∀tr,p,q,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom((({tr}⩤MAtemp)∪{tr↦p‥q})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈(({tr}⩤MAtemp)∪{tr↦p‥q})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈(({tr}⩤MAtemp)∪{tr↦p‥q})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧((({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ front(tr)+len ∈ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))&#10;&#10;/*remplacement de toute reference a MA par (({tr}⩤MA)∪{tr↦MAtemp(tr)})*/&#10;  theorem @sysml_kaos_po_G2-Post=&gt;G3-Guard ∀tr,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom(MAtemp))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈MAtemp(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈MAtemp(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(MAtemp(tr) ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ front(tr)+len ∈ MAtemp(tr)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom((({tr}⩤MA)∪{tr↦MAtemp(tr)})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ (({tr}⩤MA)∪{tr↦MAtemp(tr)})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))&#10;&#10;  theorem @sysml_kaos_po_G3-Post=&gt;G-Post ∀tr,len·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom(MA))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ MA(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(front(tr)+len = front(tr)+len)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ (tr∈dom(rear)⇒(({TRUE↦rear{tr↦rear(tr)+len}, FALSE↦rear})=({TRUE↦rear{tr↦rear(tr)+len}, FALSE↦rear})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;&#10;&#10;events&#10;  event INITIALISATION&#10;    then&#10;      @act1 connectedTrain≔∅&#10;      @act2 front≔∅&#10;      @act3 rear≔∅&#10;      @act4 MA≔∅&#10;      @act5 MAtemp≔∅&#10;  end&#10;&#10;  event ComputeTrainMA&#10;    any tr p q len&#10;    where&#10;      @grd1 tr ∈ connectedTrain∼[{TRUE}]&#10;      @grd2 p‥q⊆WAY ∧ p≤q&#10;      @grd3 front(tr)∈p‥q&#10;      @grd4 tr∈dom(rear)⇒rear(tr)∈p‥q&#10;      @grd5 p‥q ∩ union(ran({tr}⩤MA))=∅&#10;      @grd6 len ∈ ℕ1&#10;      @grd7 front(tr)+len ∈ WAY&#10;    then&#10;      @act1 MAtemp(tr) ≔ p‥q&#10;  end&#10;&#10;  event AssignMAtoTrain&#10;    any tr len&#10;    where&#10;      @grd1 tr ∈ connectedTrain∼[{TRUE}]∩dom(MAtemp)&#10;      @grd2 front(tr)∈MAtemp(tr)&#10;      @grd3 tr∈dom(rear)⇒rear(tr)∈MAtemp(tr)&#10;      @grd4 MAtemp(tr) ∩ union(ran({tr}⩤MA))=∅&#10;      @grd5 len ∈ ℕ1&#10;  &#9;  @grd6 front(tr)+len ∈ MAtemp(tr)&#10;    then&#10;      @act1 MA(tr) ≔ MAtemp(tr)&#10;  end&#10;&#10;  event MoveTrainFollowingItsMA refines MoveTrainOnTrack&#10;    any tr len n_rear&#10;    where&#10;      @grd1 tr ∈ connectedTrain∼[{TRUE}]∩dom(MA)&#10;      @grd2 len ∈ ℕ1&#10;      @grd3 front(tr)+len ∈ MA(tr)&#10;      @grd4 tr∈dom(rear)⇒n_rear =  rear{tr↦rear(tr)+len}&#10;      @grd5 tr∉dom(rear)⇒n_rear =  rear&#10;    then&#10;      @act1 front(tr) ≔ front(tr)+len&#10;      @act2 rear ≔  n_rear&#10;  end&#10;&#10;event _connectTrain&#10;  extends _connectTrain&#10;  end&#10;&#10;  event _toggleTrainConnexionStatus&#10;  extends _toggleTrainConnexionStatus&#10;  where&#10;  &#9;@grd4 (connectedTrain(tr)=FALSE∧integer = TRUE) ⇒ (tr∈dom(MA)∧re ∈ MA(tr))&#10;  end&#10;&#10;  event _exitTrain&#10;  extends _exitTrain&#10;  then&#10;  &#9;@act4 MA ≔  ({TRUE↦{tr}⩤MA, FALSE↦MA})(bool(tr∈dom(MA)))&#10;  &#9;@act5 MAtemp ≔  ({TRUE↦{tr}⩤MAtemp, FALSE↦MAtemp})(bool(tr∈dom(MAtemp)))&#10;  end&#10;&#10;&#10;end&#10;" version="5">
<org.eventb.core.refinesMachine name="_DdqTkACMEeiY5d3q2fNKcg" org.eventb.core.target="M0"/>
<org.eventb.core.seesContext name="_-KW9AACCEeiY5d3q2fNKcg" org.eventb.core.target="C0"/>
<org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_-KW9AQCCEeiY5d3q2fNKcg" org.eventb.core.assignment="connectedTrain≔∅" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_-KXkEACCEeiY5d3q2fNKcg" org.eventb.core.assignment="front≔∅" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_-KXkEQCCEeiY5d3q2fNKcg" org.eventb.core.assignment="rear≔∅" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_AuU5JQCEEeiY5d3q2fNKcg" org.eventb.core.assignment="MA≔∅" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_AuVgMACEEeiY5d3q2fNKcg" org.eventb.core.assignment="MAtemp≔∅" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_-KXkEgCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="connectedTrain"/>
<org.eventb.core.variable name="_-KXkEwCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="front"/>
<org.eventb.core.variable name="_-KXkFACCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="rear"/>
<org.eventb.core.invariant name="_-KYLIACCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_1" org.eventb.core.predicate="MA ∈ dom(connectedTrain) ⇸ ℙ(WAY)"/>
<org.eventb.core.invariant name="_-KYLIQCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_2" org.eventb.core.predicate="∀tr·(tr∈dom(MA)⇒(∃p,q·(p‥q⊆WAY ∧ p≤q∧MA(tr)=p‥q )))"/>
<org.eventb.core.invariant name="_-KYLIgCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_3" org.eventb.core.predicate="∀tr·(tr∈dom(MA)⇒front(tr)∈MA(tr))"/>
<org.eventb.core.invariant name="_-KYLIwCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_4" org.eventb.core.predicate="∀tr·(tr∈dom(rear)∩dom(MA)⇒rear(tr)∈MA(tr))"/>
<org.eventb.core.event name="_AuU5IACEEeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="ComputeTrainMA">
<org.eventb.core.parameter name="_AuU5IQCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="tr"/>
<org.eventb.core.parameter name="_AuU5IgCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p"/>
<org.eventb.core.guard name="_AuU5IwCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="tr ∈ connectedTrain∼[{TRUE}]"/>
<org.eventb.core.guard name="_AuU5JACEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="p‥q⊆WAY ∧ p≤q"/>
<org.eventb.core.guard name="_96ylEACEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="front(tr)∈p‥q"/>
<org.eventb.core.parameter name="_DdrhsACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="q"/>
<org.eventb.core.guard name="_DdrhsQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="tr∈dom(rear)⇒rear(tr)∈p‥q"/>
<org.eventb.core.guard name="_DdrhsgCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="p‥q ∩ union(ran({tr}⩤MA))=∅"/>
<org.eventb.core.action name="_DdrhswCMEeiY5d3q2fNKcg" org.eventb.core.assignment="MAtemp(tr) ≔ p‥q" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.parameter name="_DdsIwQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="len"/>
<org.eventb.core.guard name="_DdsIwgCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="len ∈ ℕ1"/>
<org.eventb.core.guard name="_DdsIwwCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="front(tr)+len ∈ WAY"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_DdrhtACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="MA"/>
<org.eventb.core.variable name="_DdrhtQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="MAtemp"/>
<org.eventb.core.invariant name="_DdrhtgCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_5" org.eventb.core.predicate="∀tr1,tr2·(({tr1,tr2}⊆dom(MA)∧tr1≠tr2)⇒MA(tr1)∩MA(tr2)=∅)"/>
<org.eventb.core.invariant name="_DdrhtwCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv1_6" org.eventb.core.predicate="MAtemp ∈ dom(connectedTrain) ⇸ ℙ(WAY)"/>
<org.eventb.core.invariant name="_DdrhuACMEeiY5d3q2fNKcg" org.eventb.core.comment="SYSML/KAOS PROOF OBLIGATIONS" org.eventb.core.generated="false" org.eventb.core.label="inv1_7" org.eventb.core.predicate="∀tr·(tr∈dom(MAtemp)⇒(∃p,q·(p‥q⊆WAY ∧ p≤q∧MAtemp(tr)=p‥q )))"/>
<org.eventb.core.event name="_DdsIwACMEeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="AssignMAtoTrain">
<org.eventb.core.guard name="_DdsIxACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="tr ∈ connectedTrain∼[{TRUE}]∩dom(MAtemp)"/>
<org.eventb.core.guard name="_DdsIxQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="front(tr)∈MAtemp(tr)"/>
<org.eventb.core.action name="_DdsIxgCMEeiY5d3q2fNKcg" org.eventb.core.assignment="MA(tr) ≔ MAtemp(tr)" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.parameter name="_DdsIyQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="tr"/>
<org.eventb.core.guard name="_Ddsv0ACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="tr∈dom(rear)⇒rear(tr)∈MAtemp(tr)"/>
<org.eventb.core.guard name="_Ddsv0QCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="MAtemp(tr) ∩ union(ran({tr}⩤MA))=∅"/>
<org.eventb.core.parameter name="_DdsIygCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="len"/>
<org.eventb.core.guard name="_Ddsv0gCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="len ∈ ℕ1"/>
<org.eventb.core.guard name="__oEjEQLxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="front(tr)+len ∈ MAtemp(tr)"/>
</org.eventb.core.event>
<org.eventb.core.event name="_DdsIxwCMEeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MoveTrainFollowingItsMA">
<org.eventb.core.refinesEvent name="_iTeL0AudEei2FOY8Ow_VsA" org.eventb.core.target="MoveTrainOnTrack"/>
<org.eventb.core.action name="_Ddsv0wCMEeiY5d3q2fNKcg" org.eventb.core.assignment="front(tr) ≔ front(tr)+len" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_Ddsv1ACMEeiY5d3q2fNKcg" org.eventb.core.assignment="rear ≔  n_rear" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.parameter name="__oEjEALxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="tr"/>
<org.eventb.core.guard name="__oEjEgLxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="tr ∈ connectedTrain∼[{TRUE}]∩dom(MA)"/>
<org.eventb.core.parameter name="_4ImwgAOkEeipYLiMLpAPlA" org.eventb.core.generated="false" org.eventb.core.identifier="len"/>
<org.eventb.core.guard name="_4ImwgQOkEeipYLiMLpAPlA" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="len ∈ ℕ1"/>
<org.eventb.core.guard name="_Edqb4ARZEeipYLiMLpAPlA" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="front(tr)+len ∈ MA(tr)"/>
<org.eventb.core.parameter name="_RXz9UCIuEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.identifier="n_rear"/>
<org.eventb.core.guard name="_RXz9USIuEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="tr∈dom(rear)⇒n_rear =  rear{tr↦rear(tr)+len}"/>
<org.eventb.core.guard name="_RXz9UiIuEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="tr∉dom(rear)⇒n_rear =  rear"/>
</org.eventb.core.event>
<org.eventb.core.invariant name="_lZpYQAL6EeiY5d3q2fNKcg" org.eventb.core.comment="remplacement de toute reference a MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G1-Guard=&gt;G-Guard" org.eventb.core.predicate="∀tr,p,q,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_ws7DUAL6EeiY5d3q2fNKcg" org.eventb.core.comment="remplacement de toute reference a MA par (({tr}⩤MA)∪{tr↦MAtemp(tr)})" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G1-Post=&gt;G2-Guard" org.eventb.core.predicate="∀tr,p,q,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom((({tr}⩤MAtemp)∪{tr↦p‥q})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈(({tr}⩤MAtemp)∪{tr↦p‥q})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈(({tr}⩤MAtemp)∪{tr↦p‥q})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧((({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ front(tr)+len ∈ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_cranYAL7EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G2-Post=&gt;G3-Guard" org.eventb.core.predicate="∀tr,len·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom(MAtemp))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈MAtemp(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈MAtemp(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(MAtemp(tr) ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ front(tr)+len ∈ MAtemp(tr)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom((({tr}⩤MA)∪{tr↦MAtemp(tr)})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ (({tr}⩤MA)∪{tr↦MAtemp(tr)})(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_ARAm0AL8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G3-Post=&gt;G-Post" org.eventb.core.predicate="∀tr,len·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}]∩dom(MA))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ MA(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(front(tr)+len = front(tr)+len)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧ (tr∈dom(rear)⇒(({TRUE↦rear{tr↦rear(tr)+len}, FALSE↦rear})=({TRUE↦rear{tr↦rear(tr)+len}, FALSE↦rear})))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)" org.eventb.core.theorem="true"/>
<org.eventb.core.event name="__Or4AB78Eeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_connectTrain">
<org.eventb.core.refinesEvent name="__OsfEB78Eeme7KoBnXCYEA" org.eventb.core.target="_connectTrain"/>
</org.eventb.core.event>
<org.eventb.core.event name="__OsfER78Eeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_toggleTrainConnexionStatus">
<org.eventb.core.refinesEvent name="__OsfEh78Eeme7KoBnXCYEA" org.eventb.core.target="_toggleTrainConnexionStatus"/>
<org.eventb.core.guard name="_m_OVMCIvEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="(connectedTrain(tr)=FALSE∧integer = TRUE) ⇒ (tr∈dom(MA)∧re ∈ MA(tr))"/>
</org.eventb.core.event>
<org.eventb.core.event name="_PeXBAB_AEeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_exitTrain">
<org.eventb.core.refinesEvent name="_PeXBAR_AEeme7KoBnXCYEA" org.eventb.core.target="_exitTrain"/>
<org.eventb.core.action name="_DaAo4B_BEeme7KoBnXCYEA" org.eventb.core.assignment="MA ≔  ({TRUE↦{tr}⩤MA, FALSE↦MA})(bool(tr∈dom(MA)))" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_DaBP8B_BEeme7KoBnXCYEA" org.eventb.core.assignment="MAtemp ≔  ({TRUE↦{tr}⩤MAtemp, FALSE↦MAtemp})(bool(tr∈dom(MAtemp)))" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
</org.eventb.core.event>
</org.eventb.core.machineFile>

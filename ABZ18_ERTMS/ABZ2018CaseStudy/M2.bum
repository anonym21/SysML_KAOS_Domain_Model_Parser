<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd;org.eventb.codegen.ui.cgConfig" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1548876810955" org.eventb.texttools.text_representation="machine M2 refines M1  sees  C2&#10;&#10;variables connectedTrain front rear MA MAtemp stateTTD stateVSS&#10;&#10;invariants&#10;  @inv2_1 stateTTD ∈ TTD → {OCCUPIED, FREE}&#10;  @inv2_2 stateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS}&#10;  @inv2_3 ∀ttd,tr·((tr∈dom(front)∖dom(rear)∧ttd∈TTD∧front(tr)∈ttd)⇒stateTTD(ttd)=OCCUPIED)&#10;  @inv2_4 ∀ttd,tr·((tr∈dom(rear)∧ttd∈TTD∧(rear(tr)‥front(tr))∩ttd≠∅)⇒stateTTD(ttd)=OCCUPIED)&#10;  @inv2_5 ∀tr1,tr2·((tr1∈dom(rear)∧tr2∈dom(rear)∧tr1≠tr2)⇒(rear(tr1)‥front(tr1))∩(rear(tr2)‥front(tr2))=∅)&#10;  @inv2_6 ∀tr1,tr2,ttd·((tr1∈dom(rear)∧tr2∈dom(front)∖dom(rear)∧tr1≠tr2∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧front(tr2)∈ttd)⇒front(tr2) &lt; rear(tr1))&#10;  @inv2_7 ∀tr1,tr2,ttd·((tr1∈dom(front)∖dom(rear)∧tr2∈dom(front)∖dom(rear)∧tr1≠tr2∧ttd∈TTD∧front(tr1)∈ttd)⇒front(tr2) ∉ ttd)&#10;  //SYSML/KAOS PROOF OBLIGATIONS&#10;  theorem @sysml_kaos_po_G1-Guard=&gt;G-Guard ∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))&#10;&#10;  theorem @sysml_kaos_po_G2-Guard=&gt;G-Guard ∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))&#10;&#10;  theorem @sysml_kaos_po_G1-Post=&gt;G-Post ∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(p‥q = p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;&#10;  theorem @sysml_kaos_po_G2-Post=&gt;G-Post ∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(p‥q = p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;&#10;/*remplacement de MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})*/&#10;  theorem @sysml_kaos_po_G1-Post=&gt;not(G2-Guard) ∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;¬(∃ vsss,vsss1,newstateVSS·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom((({tr}⩤MAtemp)∪{tr↦p‥q})) ∨ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;&#10;/*remplacement de MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})*/&#10;  theorem @sysml_kaos_po_G2-Post=&gt;not(G1-Guard) ∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;¬(∃ttds,ttds1·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom((({tr}⩤MAtemp)∪{tr↦p‥q})) ∨ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;&#10;&#10;&#10;events&#10;  event INITIALISATION&#10;    then&#10;      @act1 connectedTrain≔∅&#10;      @act2 front≔∅&#10;      @act3 rear≔∅&#10;      @act4 MA≔∅&#10;      @act5 MAtemp≔∅&#10;      @act6 stateTTD≔ TTD × {OCCUPIED}&#10;      @act7 stateVSS≔ VSS × {UNKNOW}&#10;  end&#10;&#10;  event ComputeTrainMAFollowingTTDStates refines ComputeTrainMA&#10;    any tr ttds p q  ttds1 p0   p1 q1 len   //ttds1 designe l'ensemble des ttd sur lesquels le train est succeptible de se trouver&#10;    where&#10;      @grd1 tr ∈ connectedTrain∼[{TRUE}]&#10;      @grd2 ttds⊆ stateTTD∼[{FREE}]&#10;      @grd3 union(ttds) = p1‥q1&#10;      @grd4 p1≥front(tr)&#10;      @grd5 ttds1 ⊆ TTD&#10;      @grd6 union(ttds1) = p0‥(p1−1)&#10;      @grd7 tr∈dom(rear)⇒ rear(tr) ≥p0&#10;      @grd8 tr∉dom(rear)⇒ front(tr)≥ p0&#10;      @grd9 p‥q ⊆ union(ttds ∪ ttds1)&#10;      @grd10 p‥q ∩ union(ran({tr}⩤MA))=∅&#10;&#9;  @grd11 front(tr)∈p‥q&#10;      @grd12 tr∈dom(rear)⇒rear(tr)∈p‥q&#10;      @grd13 len ∈ ℕ1&#10;      @grd14 front(tr)+len ∈ WAY&#10;      @grd15 tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q&#10;    then&#10;      @act1 MAtemp(tr) ≔ p‥q&#10;  end&#10;&#10;  event ComputeTrainMAFollowingVSSStates refines ComputeTrainMA&#10;    any tr vsss p q  vsss1 p0   p1 q1 newstateVSS len //vsss1 designe l'ensemble des vss sur lesquels le train est succeptible de se trouver&#10;    where&#10;      @grd0 newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS}&#10;      @grd1 tr ∈ connectedTrain∼[{TRUE}]&#10;      @grd2 vsss⊆ newstateVSS∼[{FREE}]&#10;      @grd3 union(vsss) = p1‥q1&#10;      @grd4 p1≥front(tr)&#10;      @grd5 vsss1 ⊆ VSS&#10;      @grd6 union(vsss1) = p0‥(p1−1)&#10;      @grd7 tr∈dom(rear)⇒ rear(tr) ≥p0&#10;      @grd8 tr∉dom(rear)⇒ front(tr)≥ p0&#10;      @grd9 p‥q ⊆ union(vsss ∪ vsss1)&#10;      @grd10 p‥q ∩ union(ran({tr}⩤MA))=∅&#10;&#9;  @grd11 front(tr)∈p‥q&#10;      @grd12 tr∈dom(rear)⇒rear(tr)∈p‥q&#10;      @grd13 len ∈ ℕ1&#10;      @grd14 front(tr)+len ∈ WAY&#10;      @grd15 tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q&#10;    then&#10;      @act1 MAtemp(tr) ≔ p‥q&#10;      @act2 stateVSS ≔ newstateVSS&#10;  end&#10;&#10;&#10;&#10;&#10;    event MoveTrainFollowingItsMA extends MoveTrainFollowingItsMA&#10;    any ttds&#10;    where&#10;      @grd6 ttds ⊆ stateTTD∼[{FREE}]&#10;      @grd7 ∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ ((front(tr)+len∈ttd) ∨ (tr∈dom(n_rear)∧((n_rear(tr)‥front(tr)+len)∩ttd≠∅)))⇒ttd∈ttds)&#10;      @grd8 tr∈dom(n_rear)⇒(∀tr1·((tr1∈dom(rear)∧tr1≠tr)⇒(rear(tr1)‥front(tr1))∩(n_rear(tr)‥front(tr)+len)=∅))&#10;      @grd9 tr∈dom(n_rear)⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧n_rear(tr)‥(front(tr)+len)∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; n_rear(tr)))&#10;      @grd10 tr∈dom(front)∖dom(rear)⇒(∀tr1,ttd·((tr1∈dom(rear)∧tr1≠tr∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧(front(tr)+len)∈ttd)⇒front(tr)+len &lt; rear(tr1)))&#10;      @grd11 tr∈dom(front)∖dom(rear)⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧front(tr1)∈ttd)⇒front(tr)+len ∉ ttd))&#10;    then&#10;      @act3 stateTTD ≔ stateTTD  (ttds × {OCCUPIED})&#10;  end&#10;&#10;  event _connectTrain&#10;  extends _connectTrain&#10;&#9;any ttds&#10;&#9;where&#10;  &#9;  @grd6 ttds ⊆ stateTTD∼[{FREE}]&#10;      @grd7 ∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ ((fr∈ttd) ∨ (integer=TRUE∧((re‥fr)∩ttd≠∅)))⇒ttd∈ttds)&#10;      @grd8 integer=TRUE ⇒(∀tr1·(tr1∈dom(rear)⇒(rear(tr1)‥front(tr1))∩(re‥fr)=∅))&#10;      @grd9 integer=TRUE ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧ttd∈TTD∧re‥fr∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; re))&#10;      @grd10 integer=FALSE ⇒(∀tr1,ttd·((tr1∈dom(rear)∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧fr∈ttd)⇒fr &lt; rear(tr1)))&#10;      @grd11 integer=FALSE ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧ttd∈TTD∧front(tr1)∈ttd)⇒fr ∉ ttd))&#10;    then&#10;      @act4 stateTTD ≔ stateTTD  (ttds × {OCCUPIED})&#10;  end&#10;&#10;  event _toggleTrainConnexionStatus&#10;  extends _toggleTrainConnexionStatus&#10;  any ttds&#10;&#9;where&#10;  &#9;  @grd5 ttds ⊆ stateTTD∼[{FREE}]&#10;      @grd6 ∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ (connectedTrain(tr)=FALSE∧integer = TRUE∧((re‥front(tr))∩ttd≠∅))⇒ttd∈ttds)&#10;      @grd7 (connectedTrain(tr)=FALSE∧integer = TRUE) ⇒(∀tr1·((tr1∈dom(rear)∧tr1≠tr)⇒(rear(tr1)‥front(tr1))∩(re‥front(tr))=∅))&#10;      @grd8 (connectedTrain(tr)=FALSE∧integer = TRUE) ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧re‥front(tr)∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; re))&#10;      @grd9 (connectedTrain(tr)=FALSE∧integer = FALSE) ⇒(∀tr1,ttd·((tr1∈dom(rear)∧tr1≠tr∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧front(tr)∈ttd)⇒front(tr) &lt; rear(tr1)))&#10;      @grd10 (connectedTrain(tr)=FALSE∧integer = FALSE) ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD)⇒((front(tr1)∈ttd⇒front(tr) ∉ ttd)∧(front(tr)∈ttd⇒front(tr1) ∉ ttd))))&#10;    then&#10;      @act3 stateTTD ≔ stateTTD  (ttds × {OCCUPIED})&#10;  end&#10;&#10;  event _exitTrain&#10;  extends _exitTrain&#10;  end&#10;&#10;&#10;end&#10;" version="5">
<org.eventb.core.refinesMachine name="_y6hXgAEyEeiY5d3q2fNKcg" org.eventb.core.target="M1"/>
<org.eventb.core.seesContext name="_y6hXgQEyEeiY5d3q2fNKcg" org.eventb.core.target="C2"/>
<org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_-KW9AQCCEeiY5d3q2fNKcg" org.eventb.core.assignment="connectedTrain≔∅" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_-KXkEACCEeiY5d3q2fNKcg" org.eventb.core.assignment="front≔∅" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
<org.eventb.core.action name="_-KXkEQCCEeiY5d3q2fNKcg" org.eventb.core.assignment="rear≔∅" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
<org.eventb.core.action name="_AuU5JQCEEeiY5d3q2fNKcg" org.eventb.core.assignment="MA≔∅" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
<org.eventb.core.action name="_AuVgMACEEeiY5d3q2fNKcg" org.eventb.core.assignment="MAtemp≔∅" org.eventb.core.generated="false" org.eventb.core.label="act5"/>
<org.eventb.core.action name="_DdsIxgCMEeiY5d3q2fNKcg" org.eventb.core.assignment="stateTTD≔ TTD × {OCCUPIED}" org.eventb.core.generated="false" org.eventb.core.label="act6"/>
<org.eventb.core.action name="_DdrhswCMEeiY5d3q2fNKcg" org.eventb.core.assignment="stateVSS≔ VSS × {UNKNOW}" org.eventb.core.generated="false" org.eventb.core.label="act7"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_-KXkEgCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="connectedTrain"/>
<org.eventb.core.variable name="_-KXkEwCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="front"/>
<org.eventb.core.variable name="_-KXkFACCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="rear"/>
<org.eventb.core.invariant name="_-KYLIACCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_1" org.eventb.core.predicate="stateTTD ∈ TTD → {OCCUPIED, FREE}"/>
<org.eventb.core.invariant name="_-KYLIQCCEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_2" org.eventb.core.predicate="stateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS}"/>
<org.eventb.core.event name="_AuU5IACEEeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="ComputeTrainMAFollowingTTDStates">
<org.eventb.core.refinesEvent name="_qzrSUAudEei2FOY8Ow_VsA" org.eventb.core.target="ComputeTrainMA"/>
<org.eventb.core.parameter name="_AuU5IQCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="tr"/>
<org.eventb.core.parameter name="_AuU5IgCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="ttds"/>
<org.eventb.core.guard name="_AuU5IwCEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="tr ∈ connectedTrain∼[{TRUE}]"/>
<org.eventb.core.guard name="_AuU5JACEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="ttds⊆ stateTTD∼[{FREE}]"/>
<org.eventb.core.guard name="_96ylEACEEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="union(ttds) = p1‥q1"/>
<org.eventb.core.parameter name="_DdrhsACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p"/>
<org.eventb.core.guard name="_DdrhsQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="p1≥front(tr)"/>
<org.eventb.core.guard name="_DdrhsgCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="ttds1 ⊆ TTD"/>
<org.eventb.core.parameter name="_DdsIwQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="q"/>
<org.eventb.core.parameter name="_DdsIyQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="ttds1"/>
<org.eventb.core.parameter name="_DdsIygCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p0"/>
<org.eventb.core.parameter name="_y6iloAEyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p1"/>
<org.eventb.core.parameter name="_y6iloQEyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="q1"/>
<org.eventb.core.guard name="_DdsIwgCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="union(ttds1) = p0‥(p1−1)"/>
<org.eventb.core.guard name="_DdsIwwCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="tr∈dom(rear)⇒ rear(tr) ≥p0"/>
<org.eventb.core.guard name="_DdsIxACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd8" org.eventb.core.predicate="tr∉dom(rear)⇒ front(tr)≥ p0"/>
<org.eventb.core.guard name="_DdsIxQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd9" org.eventb.core.predicate="p‥q ⊆ union(ttds ∪ ttds1)"/>
<org.eventb.core.guard name="_Ddsv0ACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="p‥q ∩ union(ran({tr}⩤MA))=∅"/>
<org.eventb.core.guard name="_Ddsv0QCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd11" org.eventb.core.predicate="front(tr)∈p‥q"/>
<org.eventb.core.guard name="_Ddsv0gCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd12" org.eventb.core.predicate="tr∈dom(rear)⇒rear(tr)∈p‥q"/>
<org.eventb.core.action name="_Ddsv0wCMEeiY5d3q2fNKcg" org.eventb.core.assignment="MAtemp(tr) ≔ p‥q" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.parameter name="_Dpk_sgE8EeiY5d3q2fNKcg" org.eventb.core.comment="ttds1 designe l'ensemble des ttd sur lesquels le train est succeptible de se trouver" org.eventb.core.generated="false" org.eventb.core.identifier="len"/>
<org.eventb.core.guard name="_DplmxQE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd13" org.eventb.core.predicate="len ∈ ℕ1"/>
<org.eventb.core.guard name="_DplmxgE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd14" org.eventb.core.predicate="front(tr)+len ∈ WAY"/>
<org.eventb.core.guard name="_DplmxwE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd15" org.eventb.core.predicate="tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q"/>
</org.eventb.core.event>
<org.eventb.core.variable name="_DdrhtACMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="MA"/>
<org.eventb.core.variable name="_DdrhtQCMEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="MAtemp"/>
<org.eventb.core.variable name="_y6jMsAEyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="stateTTD"/>
<org.eventb.core.variable name="_y6jMsQEyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="stateVSS"/>
<org.eventb.core.event name="_Dpk_sAE8EeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="ComputeTrainMAFollowingVSSStates">
<org.eventb.core.refinesEvent name="_qzsgcAudEei2FOY8Ow_VsA" org.eventb.core.target="ComputeTrainMA"/>
<org.eventb.core.parameter name="_Dpk_swE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="tr"/>
<org.eventb.core.parameter name="_Dpk_tAE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="vsss"/>
<org.eventb.core.parameter name="_DplmwAE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p"/>
<org.eventb.core.parameter name="_DplmwQE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="q"/>
<org.eventb.core.parameter name="_DplmwgE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="vsss1"/>
<org.eventb.core.parameter name="_DplmwwE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p0"/>
<org.eventb.core.parameter name="_DplmxAE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="p1"/>
<org.eventb.core.parameter name="_XVdfAAE9EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="q1"/>
<org.eventb.core.parameter name="_XVdfAQE9EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="newstateVSS"/>
<org.eventb.core.parameter name="_eKdugQFqEeiY5d3q2fNKcg" org.eventb.core.comment="vsss1 designe l'ensemble des vss sur lesquels le train est succeptible de se trouver" org.eventb.core.generated="false" org.eventb.core.identifier="len"/>
<org.eventb.core.guard name="_DplmyAE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd0" org.eventb.core.predicate="newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS}"/>
<org.eventb.core.guard name="_DplmyQE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="tr ∈ connectedTrain∼[{TRUE}]"/>
<org.eventb.core.guard name="_DplmygE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="vsss⊆ newstateVSS∼[{FREE}]"/>
<org.eventb.core.guard name="_DplmywE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd3" org.eventb.core.predicate="union(vsss) = p1‥q1"/>
<org.eventb.core.guard name="_DplmzAE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd4" org.eventb.core.predicate="p1≥front(tr)"/>
<org.eventb.core.guard name="_DplmzQE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="vsss1 ⊆ VSS"/>
<org.eventb.core.guard name="_DplmzgE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="union(vsss1) = p0‥(p1−1)"/>
<org.eventb.core.guard name="_DpmN0AE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="tr∈dom(rear)⇒ rear(tr) ≥p0"/>
<org.eventb.core.guard name="_DpmN0QE8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd8" org.eventb.core.predicate="tr∉dom(rear)⇒ front(tr)≥ p0"/>
<org.eventb.core.guard name="_XVeGEAE9EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd9" org.eventb.core.predicate="p‥q ⊆ union(vsss ∪ vsss1)"/>
<org.eventb.core.guard name="_XVeGEQE9EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="p‥q ∩ union(ran({tr}⩤MA))=∅"/>
<org.eventb.core.guard name="_eKduggFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd11" org.eventb.core.predicate="front(tr)∈p‥q"/>
<org.eventb.core.guard name="_eKdugwFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd12" org.eventb.core.predicate="tr∈dom(rear)⇒rear(tr)∈p‥q"/>
<org.eventb.core.guard name="_eKduhwFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd13" org.eventb.core.predicate="len ∈ ℕ1"/>
<org.eventb.core.guard name="_eKduiAFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd14" org.eventb.core.predicate="front(tr)+len ∈ WAY"/>
<org.eventb.core.guard name="_SMI3IAFxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd15" org.eventb.core.predicate="tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q"/>
<org.eventb.core.action name="_DpmN0gE8EeiY5d3q2fNKcg" org.eventb.core.assignment="MAtemp(tr) ≔ p‥q" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XVeGEgE9EeiY5d3q2fNKcg" org.eventb.core.assignment="stateVSS ≔ newstateVSS" org.eventb.core.generated="false" org.eventb.core.label="act2"/>
</org.eventb.core.event>
<org.eventb.core.event name="_YDCaEAFmEeiY5d3q2fNKcg" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="MoveTrainFollowingItsMA">
<org.eventb.core.refinesEvent name="_T25qgAMLEeipYLiMLpAPlA" org.eventb.core.target="MoveTrainFollowingItsMA"/>
<org.eventb.core.parameter name="_eKduhgFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.identifier="ttds"/>
<org.eventb.core.guard name="_SMI3IQFxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="ttds ⊆ stateTTD∼[{FREE}]"/>
<org.eventb.core.guard name="_SMI3IgFxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ ((front(tr)+len∈ttd) ∨ (tr∈dom(n_rear)∧((n_rear(tr)‥front(tr)+len)∩ttd≠∅)))⇒ttd∈ttds)"/>
<org.eventb.core.guard name="_SMI3IwFxEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd8" org.eventb.core.predicate="tr∈dom(n_rear)⇒(∀tr1·((tr1∈dom(rear)∧tr1≠tr)⇒(rear(tr1)‥front(tr1))∩(n_rear(tr)‥front(tr)+len)=∅))"/>
<org.eventb.core.guard name="_vXYM0AFyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd9" org.eventb.core.predicate="tr∈dom(n_rear)⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧n_rear(tr)‥(front(tr)+len)∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; n_rear(tr)))"/>
<org.eventb.core.guard name="_vXYM0QFyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="tr∈dom(front)∖dom(rear)⇒(∀tr1,ttd·((tr1∈dom(rear)∧tr1≠tr∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧(front(tr)+len)∈ttd)⇒front(tr)+len &lt; rear(tr1)))"/>
<org.eventb.core.guard name="_vXYM0gFyEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="grd11" org.eventb.core.predicate="tr∈dom(front)∖dom(rear)⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧front(tr1)∈ttd)⇒front(tr)+len ∉ ttd))"/>
<org.eventb.core.action name="_XVetIAE9EeiY5d3q2fNKcg" org.eventb.core.assignment="stateTTD ≔ stateTTD  (ttds × {OCCUPIED})" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.invariant name="_eKdHcAFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_3" org.eventb.core.predicate="∀ttd,tr·((tr∈dom(front)∖dom(rear)∧ttd∈TTD∧front(tr)∈ttd)⇒stateTTD(ttd)=OCCUPIED)"/>
<org.eventb.core.invariant name="_eKdHcQFqEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_4" org.eventb.core.predicate="∀ttd,tr·((tr∈dom(rear)∧ttd∈TTD∧(rear(tr)‥front(tr))∩ttd≠∅)⇒stateTTD(ttd)=OCCUPIED)"/>
<org.eventb.core.invariant name="_Rn9d8AFvEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_5" org.eventb.core.predicate="∀tr1,tr2·((tr1∈dom(rear)∧tr2∈dom(rear)∧tr1≠tr2)⇒(rear(tr1)‥front(tr1))∩(rear(tr2)‥front(tr2))=∅)"/>
<org.eventb.core.invariant name="_Rn-FAAFvEeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="inv2_6" org.eventb.core.predicate="∀tr1,tr2,ttd·((tr1∈dom(rear)∧tr2∈dom(front)∖dom(rear)∧tr1≠tr2∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧front(tr2)∈ttd)⇒front(tr2) &lt; rear(tr1))"/>
<org.eventb.core.invariant name="_mu2YIAFvEeiY5d3q2fNKcg" org.eventb.core.comment="SYSML/KAOS PROOF OBLIGATIONS" org.eventb.core.generated="false" org.eventb.core.label="inv2_7" org.eventb.core.predicate="∀tr1,tr2,ttd·((tr1∈dom(front)∖dom(rear)∧tr2∈dom(front)∖dom(rear)∧tr1≠tr2∧ttd∈TTD∧front(tr1)∈ttd)⇒front(tr2) ∉ ttd)"/>
<org.eventb.core.invariant name="_VtKOEAL2EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G1-Guard=&gt;G-Guard" org.eventb.core.predicate="∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_VtKOEQL2EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G2-Guard=&gt;G-Guard" org.eventb.core.predicate="∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;  &#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q⊆WAY ∧ p≤q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;))" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_VtKOEgL2EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G1-Post=&gt;G-Post" org.eventb.core.predicate="∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(p‥q = p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_VtKOEwL2EeiY5d3q2fNKcg" org.eventb.core.comment="remplacement de MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G2-Post=&gt;G-Post" org.eventb.core.predicate="∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(p‥q = p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_WvN5QAL8EeiY5d3q2fNKcg" org.eventb.core.comment="remplacement de MAtemp par (({tr}⩤MAtemp)∪{tr↦p‥q})" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G1-Post=&gt;not(G2-Guard)" org.eventb.core.predicate="∀tr,p,q,len,ttds,ttds1,p0,p1,q1·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;¬(∃ vsss,vsss1,newstateVSS·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom((({tr}⩤MAtemp)∪{tr↦p‥q})) ∨ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)" org.eventb.core.theorem="true"/>
<org.eventb.core.invariant name="_WvN5QQL8EeiY5d3q2fNKcg" org.eventb.core.generated="false" org.eventb.core.label="sysml_kaos_po_G2-Post=&gt;not(G1-Guard)" org.eventb.core.predicate="∀tr,p,q,len,vsss,vsss1,p0,p1,q1,newstateVSS·((&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(newstateVSS ∈ VSS → {OCCUPIED, FREE, UNKNOW, AMBIGUOUS})&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss⊆ newstateVSS∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(vsss1 ⊆ VSS)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(vsss1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(vsss ∪ vsss1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(MAtemp) ∨ MAtemp(tr) ≠ p‥q)&#10;&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;) ⇒&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;¬(∃ttds,ttds1·(&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;(tr ∈ connectedTrain∼[{TRUE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds⊆ stateTTD∼[{FREE}])&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds) = p1‥q1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p1≥front(tr))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(ttds1 ⊆ TTD)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(union(ttds1) = p0‥(p1−1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒ rear(tr) ≥p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom(rear)⇒ front(tr)≥ p0)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ⊆ union(ttds ∪ ttds1))&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(p‥q ∩ union(ran({tr}⩤MA))=∅)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∈dom(rear)⇒rear(tr)∈p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(len ∈ ℕ1)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(front(tr)+len ∈ WAY)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;∧(tr∉dom((({tr}⩤MAtemp)∪{tr↦p‥q})) ∨ (({tr}⩤MAtemp)∪{tr↦p‥q})(tr) ≠ p‥q)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;   )&#10;  &#9;&#9;&#9;&#9;&#9;&#9;&#9;&#9;)" org.eventb.core.theorem="true"/>
<org.eventb.core.event name="_4IWHcB78Eeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_connectTrain">
<org.eventb.core.refinesEvent name="_4IWHcR78Eeme7KoBnXCYEA" org.eventb.core.target="_connectTrain"/>
<org.eventb.core.parameter name="_PbYKAB-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.identifier="ttds"/>
<org.eventb.core.guard name="_PbYxEB-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="ttds ⊆ stateTTD∼[{FREE}]"/>
<org.eventb.core.guard name="_PbYxER-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ ((fr∈ttd) ∨ (integer=TRUE∧((re‥fr)∩ttd≠∅)))⇒ttd∈ttds)"/>
<org.eventb.core.guard name="_PbYxEh-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd8" org.eventb.core.predicate="integer=TRUE ⇒(∀tr1·(tr1∈dom(rear)⇒(rear(tr1)‥front(tr1))∩(re‥fr)=∅))"/>
<org.eventb.core.guard name="_PbYxEx-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd9" org.eventb.core.predicate="integer=TRUE ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧ttd∈TTD∧re‥fr∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; re))"/>
<org.eventb.core.guard name="_PbYxFB-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="integer=FALSE ⇒(∀tr1,ttd·((tr1∈dom(rear)∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧fr∈ttd)⇒fr &lt; rear(tr1)))"/>
<org.eventb.core.guard name="_PbYxFR-2Eeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd11" org.eventb.core.predicate="integer=FALSE ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧ttd∈TTD∧front(tr1)∈ttd)⇒fr ∉ ttd))"/>
<org.eventb.core.action name="_PbYxFh-2Eeme7KoBnXCYEA" org.eventb.core.assignment="stateTTD ≔ stateTTD  (ttds × {OCCUPIED})" org.eventb.core.generated="false" org.eventb.core.label="act4"/>
</org.eventb.core.event>
<org.eventb.core.event name="_4IWHch78Eeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_toggleTrainConnexionStatus">
<org.eventb.core.refinesEvent name="_4IWugB78Eeme7KoBnXCYEA" org.eventb.core.target="_toggleTrainConnexionStatus"/>
<org.eventb.core.parameter name="_4SghQCSoEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.identifier="ttds"/>
<org.eventb.core.guard name="_4SghQSSoEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd5" org.eventb.core.predicate="ttds ⊆ stateTTD∼[{FREE}]"/>
<org.eventb.core.guard name="_4SghQiSoEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd6" org.eventb.core.predicate="∀ttd·(ttd∈stateTTD∼[{FREE}] ∧ (connectedTrain(tr)=FALSE∧integer = TRUE∧((re‥front(tr))∩ttd≠∅))⇒ttd∈ttds)"/>
<org.eventb.core.guard name="_4SghQySoEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd7" org.eventb.core.predicate="(connectedTrain(tr)=FALSE∧integer = TRUE) ⇒(∀tr1·((tr1∈dom(rear)∧tr1≠tr)⇒(rear(tr1)‥front(tr1))∩(re‥front(tr))=∅))"/>
<org.eventb.core.guard name="_4SghRCSoEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd8" org.eventb.core.predicate="(connectedTrain(tr)=FALSE∧integer = TRUE) ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD∧re‥front(tr)∩ttd≠∅∧front(tr1)∈ttd)⇒front(tr1) &lt; re))"/>
<org.eventb.core.guard name="_Lykt8CSxEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd9" org.eventb.core.predicate="(connectedTrain(tr)=FALSE∧integer = FALSE) ⇒(∀tr1,ttd·((tr1∈dom(rear)∧tr1≠tr∧ttd∈TTD∧rear(tr1)‥front(tr1)∩ttd≠∅∧front(tr)∈ttd)⇒front(tr) &lt; rear(tr1)))"/>
<org.eventb.core.guard name="_LylVACSxEeme7KoBnXCYEA" org.eventb.core.generated="false" org.eventb.core.label="grd10" org.eventb.core.predicate="(connectedTrain(tr)=FALSE∧integer = FALSE) ⇒(∀tr1,ttd·((tr1∈dom(front)∖dom(rear)∧tr1≠tr∧ttd∈TTD)⇒((front(tr1)∈ttd⇒front(tr) ∉ ttd)∧(front(tr)∈ttd⇒front(tr1) ∉ ttd))))"/>
<org.eventb.core.action name="_4ShIUCSoEeme7KoBnXCYEA" org.eventb.core.assignment="stateTTD ≔ stateTTD  (ttds × {OCCUPIED})" org.eventb.core.generated="false" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_SRhsMB_AEeme7KoBnXCYEA" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.generated="false" org.eventb.core.label="_exitTrain">
<org.eventb.core.refinesEvent name="_SRhsMR_AEeme7KoBnXCYEA" org.eventb.core.target="_exitTrain"/>
</org.eventb.core.event>
</org.eventb.core.machineFile>
